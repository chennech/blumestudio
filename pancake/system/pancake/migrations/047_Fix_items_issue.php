<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Migration_Fix_items_issue extends CI_Migration {
    function up() {
        if (!file_exists(APPPATH.'modules/items/controllers/admin.php')) {
	    # This installation suffered from the 3.1.6 no-new-folder bug. Let's treat it.
	    
	    $this->load->model('upgrade/update_system_m', 'u');
	    if ($this->u->write) {
		mkdir(APPPATH.'modules/items/');
		mkdir(APPPATH.'modules/items/controllers');
		mkdir(APPPATH.'modules/items/models');
		mkdir(APPPATH.'modules/items/views');
		
		$this->u->set_file_contents(APPPATH.'modules/items/controllers/admin.php', base64_decode('PD9waHAgZGVmaW5lZCgnQkFTRVBBVEgnKSBPUiBleGl0KCdObyBkaXJlY3Qgc2NyaXB0IGFjY2VzcyBhbGxvd2VkJyk7Ci8qKgogKiBQYW5jYWtlCiAqCiAqIEEgc2ltcGxlLCBmYXN0LCBzZWxmLWhvc3RlZCBpbnZvaWNpbmcgYXBwbGljYXRpb24KICoKICogQHBhY2thZ2UJCVBhbmNha2UKICogQGF1dGhvcgkJUGFuY2FrZSBEZXYgVGVhbQogKiBAY29weXJpZ2h0CUNvcHlyaWdodCAoYykgMjAxMCwgUGFuY2FrZSBQYXltZW50cwogKiBAbGljZW5zZQkJaHR0cDovL3BhbmNha2VhcHAuY29tL2xpY2Vuc2UKICogQGxpbmsJCWh0dHA6Ly9wYW5jYWtlYXBwLmNvbQogKiBAc2luY2UJCVZlcnNpb24gMS4wCiAqLwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovKioKICogVGhlIGFkbWluIGNvbnRyb2xsZXIgZm9yIENsaWVudHMKICoKICogQHN1YnBhY2thZ2UJQ29udHJvbGxlcnMKICogQGNhdGVnb3J5CUNsaWVudHMKICovCmNsYXNzIEFkbWluIGV4dGVuZHMgQWRtaW5fQ29udHJvbGxlcgp7CgkvKioKCSAqIFRoZSBjb25zdHJ1Y3QgZG9lc24ndCBkbyBhbnl0aGluZyB1c2VmdWwgcmlnaHQgbm93LgoJICoKCSAqIEBhY2Nlc3MJcHVibGljCgkgKiBAcmV0dXJuCXZvaWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7CgkJJHRoaXMtPmxvYWQtPm1vZGVsKCdpdGVtX20nKTsKCX0KCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgkvKioKCSAqIExvYWRzIGFsbCB0aGUgaXRlbXMgaW4gYW5kIHNlbmRzIHRoZW4gdG8gYmUgb3V0cHV0dGVkCgkgKgoJICogQGFjY2VzcwlwdWJsaWMKCSAqIEByZXR1cm4Jdm9pZAoJICovCglwdWJsaWMgZnVuY3Rpb24gaW5kZXgoJG9mZnNldCA9IDApCgl7CiAgICAgICAgJGNvdW50ID0gJHRoaXMtPml0ZW1fbS0+Y291bnRfYWxsKCk7CgkJJGl0ZW1zID0gJHRoaXMtPml0ZW1fbS0+b3JkZXJfYnkoJ25hbWUnKS0+bGltaXQoJHRoaXMtPnBhZ2luYXRpb25fY29uZmlnWydwZXJfcGFnZSddLCAkb2Zmc2V0KS0+Z2V0X2FsbCgpOwogICAgICAgIAogICAgICAgIC8vIFN0YXJ0IHVwIHRoZSBwYWdpbmF0aW9uIAoJCSR0aGlzLT5sb2FkLT5saWJyYXJ5KCdwYWdpbmF0aW9uJyk7CiAgICAgICAgJHRoaXMtPnBhZ2luYXRpb25fY29uZmlnWydiYXNlX3VybCddID0gc2l0ZV91cmwoJ2FkbWluL2l0ZW1zL2luZGV4LycpOwoJCSR0aGlzLT5wYWdpbmF0aW9uX2NvbmZpZ1sndXJpX3NlZ21lbnQnXSA9IDQ7CgkJJHRoaXMtPnBhZ2luYXRpb25fY29uZmlnWyd0b3RhbF9yb3dzJ10gPSAkY291bnQ7CgkJJHRoaXMtPnBhZ2luYXRpb24tPmluaXRpYWxpemUoJHRoaXMtPnBhZ2luYXRpb25fY29uZmlnKTsKCgkJJHRoaXMtPnRlbXBsYXRlLT5pdGVtcyA9ICRpdGVtczsKCgkJJHRoaXMtPnRlbXBsYXRlLT5idWlsZCgnbGlzdCcpOwoJfQoKCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCS8qKgoJICogQ3JlYXRlcyBhIGl0ZW0KCSAqCgkgKiBAYWNjZXNzCXB1YmxpYwoJICogQHJldHVybgl2b2lkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoKQoJewoJCWlmICgkX1BPU1QpCgkJewoJCQkkcmVzdWx0ID0gJHRoaXMtPml0ZW1fbS0+aW5zZXJ0KGFycmF5KAoJCQkJJ25hbWUnID0+ICR0aGlzLT5pbnB1dC0+cG9zdCgnbmFtZScpLAoJCQkJJ2Rlc2NyaXB0aW9uJyA9PiAkdGhpcy0+aW5wdXQtPnBvc3QoJ2Rlc2NyaXB0aW9uJyksCgkJCQkncmF0ZSc9PiAkdGhpcy0+aW5wdXQtPnBvc3QoJ3JhdGUnKSwgCgkJCQkncXR5JyA9PiAkdGhpcy0+aW5wdXQtPnBvc3QoJ3F0eScpLCAKCQkJCSd0YXhfaWQnID0+ICR0aGlzLT5pbnB1dC0+cG9zdCgndGF4X2lkJyksCgkJCSkpOwoJCQkKCQkJaWYgKCRyZXN1bHQpCgkJCXsKCQkJCSR0aGlzLT5zZXNzaW9uLT5zZXRfZmxhc2hkYXRhKCdzdWNjZXNzJywgbGFuZygnaXRlbXM6YWRkZWQnKSk7CgkJCQlyZWRpcmVjdCgnYWRtaW4vaXRlbXMnKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSR0aGlzLT50ZW1wbGF0ZS0+ZXJyb3IgPSB2YWxpZGF0aW9uX2Vycm9ycygpOwoJCQl9CgkJfQoJCQoJCSR0aGlzLT50ZW1wbGF0ZS0+YWN0aW9uX3R5cGUgPSAnYWRkJzsKCQkkdGhpcy0+dGVtcGxhdGUtPmFjdGlvbiA9ICdjcmVhdGUnOwoJCSR0aGlzLT50ZW1wbGF0ZS0+YnVpbGQoJ2Zvcm0nKTsKCX0KCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgkvKioKCSAqIEVkaXRzIGEgaXRlbQoJICoKCSAqIEBhY2Nlc3MJcHVibGljCgkgKiBAcmV0dXJuCXZvaWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGVkaXQoJGl0ZW1faWQpCgl7CgkJJHRoaXMtPmxvYWQtPm1vZGVsKCdpdGVtX20nKTsKCgkJJGl0ZW0gPSAkdGhpcy0+aXRlbV9tLT5nZXQoJGl0ZW1faWQpOwoJCWlmIChlbXB0eSgkaXRlbSkpCgkJewoJCQkkdGhpcy0+c2Vzc2lvbi0+c2V0X2ZsYXNoZGF0YSgnZXJyb3InLCBsYW5nKCdpdGVtczpkb2VzX25vdF9leGlzdCcpKTsKCQkJcmVkaXJlY3QoJ2FkbWluL2l0ZW1zJyk7CgkJfQoKCQlpZiAoJF9QT1NUKQoJCXsKCQkJJHJlc3VsdCA9ICR0aGlzLT5pdGVtX20tPnVwZGF0ZSgkaXRlbV9pZCwgYXJyYXkoCgkJCQknbmFtZScgPT4gJHRoaXMtPmlucHV0LT5wb3N0KCduYW1lJyksCgkJCQknZGVzY3JpcHRpb24nID0+ICR0aGlzLT5pbnB1dC0+cG9zdCgnZGVzY3JpcHRpb24nKSwKCQkJCSdyYXRlJz0+ICR0aGlzLT5pbnB1dC0+cG9zdCgncmF0ZScpLCAKCQkJCSdxdHknID0+ICR0aGlzLT5pbnB1dC0+cG9zdCgncXR5JyksIAoJCQkJJ3RheF9pZCcgPT4gJHRoaXMtPmlucHV0LT5wb3N0KCd0YXhfaWQnKSwKCQkJKSk7CgkJCQoJCQlpZiAoJHJlc3VsdCkKCQkJewoJCQkJJHRoaXMtPnNlc3Npb24tPnNldF9mbGFzaGRhdGEoJ3N1Y2Nlc3MnLCBsYW5nKCdpdGVtczplZGl0ZWQnKSk7CgkJCQlyZWRpcmVjdCgnYWRtaW4vaXRlbXMnKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSR0aGlzLT50ZW1wbGF0ZS0+ZXJyb3IgPSB2YWxpZGF0aW9uX2Vycm9ycygpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCWZvcmVhY2ggKChhcnJheSkgJGl0ZW0gYXMgJGtleSA9PiAkdmFsKQoJCQl7CgkJCQkkX1BPU1RbJGtleV0gPSAkdmFsOwoJCQl9CgkJfQoJCSR0aGlzLT50ZW1wbGF0ZS0+YWN0aW9uX3R5cGUgPSAnZWRpdCc7CiAgICAgICAgJHRoaXMtPnRlbXBsYXRlLT5pdGVtX2lkID0gJGl0ZW1faWQ7CgkJJHRoaXMtPnRlbXBsYXRlLT5hY3Rpb24gPSAnZWRpdC8nLiRpdGVtX2lkOwoJCSR0aGlzLT50ZW1wbGF0ZS0+YnVpbGQoJ2Zvcm0nKTsKCX0KCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgkvKioKCSAqIEVkaXRzIGEgaXRlbQoJICoKCSAqIEBhY2Nlc3MJcHVibGljCgkgKiBAcmV0dXJuCXZvaWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgkaXRlbV9pZCkKCXsKCQkkaXRlbSA9ICR0aGlzLT5pdGVtX20tPmdldCgkaXRlbV9pZCk7CgkJCgkJaWYgKCRfUE9TVCkKCQl7CgkJCS8vIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYWN0aW9uIGhhc2ggbWF0Y2hlcywgaWYgbm90IGtpY2sgZW0nIHRvIHRoZSBjdXJiCgkJCWlmICgkdGhpcy0+aW5wdXQtPnBvc3QoJ2FjdGlvbl9oYXNoJykgIT09ICR0aGlzLT5zZXNzaW9uLT51c2VyZGF0YSgnYWN0aW9uX2hhc2gnKSkKCQkJewoJCQkJJHRoaXMtPnNlc3Npb24tPnNldF9mbGFzaGRhdGEoJ2Vycm9yJywgbGFuZygnZ2xvYmFsOmluc2VjdXJlX2FjdGlvbicpKTsKCQkJCXJlZGlyZWN0KCdhZG1pbi9kYXNoYm9hcmQnKTsKCQkJfQoJCQkKICAgICAgICAgICAgIyBUaGlzIGRlbGV0ZXMgYWxsIGludm9pY2VzLCBwcm9qZWN0cyBhbmQgcHJvcG9zYWxzIHJlbGF0ZWQgdG8gdGhlIGl0ZW0uCgkJCSR0aGlzLT5pdGVtX20tPmRlbGV0ZSgkaXRlbV9pZCk7CgkJCSR0aGlzLT5zZXNzaW9uLT5zZXRfZmxhc2hkYXRhKCdzdWNjZXNzJywgbGFuZygnaXRlbXM6ZGVsZXRlZCcpKTsKCQkJcmVkaXJlY3QoJ2FkbWluL2l0ZW1zJyk7CgkJfQoKCQkvLyBXZSBzZXQgYSB1bmlxdWUgYWN0aW9uIGhhc2ggaGVyZSB0byBzdG9wIENTUkYgYXR0YWNrcyAoaGFja2VyJ3MgYmV3YXJlKQoJCSRhY3Rpb25faGFzaCA9IG1kNSh0aW1lKCkuJGl0ZW1faWQpOwoJCSR0aGlzLT5zZXNzaW9uLT5zZXRfdXNlcmRhdGEoJ2FjdGlvbl9oYXNoJywgJGFjdGlvbl9oYXNoKTsKCgkJLy8gTGV0cyBtYWtlIHN1cmUgYmVmb3JlIHdlIGp1c3QgZ28ga2lsbGluZyBzdHVmZiBsaWtlIFJhbWJvCgkJJHRoaXMtPnRlbXBsYXRlLT5idWlsZCgnYXJlX3lvdV9zdXJlJywgYXJyYXkoCgkJCSdpdGVtJyA9PiAkaXRlbSwKCQkJJ2FjdGlvbl9oYXNoJyA9PiAkYWN0aW9uX2hhc2gsCgkJKSk7Cgl9CgoKCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCS8qKgoJICogU2hvd3MgdGhlIGl0ZW1zIGluZm8KCSAqCgkgKiBAYWNjZXNzCXB1YmxpYwoJICogQHBhcmFtCXN0cmluZwlUaGUgaXRlbSBpZAoJICogQHJldHVybgl2b2lkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB2aWV3KCRpdGVtX2lkKQoJewoJCWlmICggISAkaXRlbSA9ICR0aGlzLT5pdGVtX20tPmdldCgkaXRlbV9pZCkpCgkJewoJCQkkdGhpcy0+c2Vzc2lvbi0+c2V0X2ZsYXNoZGF0YSgnZXJyb3InLCBsYW5nKCdpdGVtczpkb2VzX25vdF9leGlzdCcpKTsKCQkJcmVkaXJlY3QoJ2FkbWluL2l0ZW1zJyk7CgkJfQoJCQoJCSR0aGlzLT50ZW1wbGF0ZS0+YnVpbGQoJ3ZpZXcnLCBhcnJheSgKCQkJJ2l0ZW0nID0+ICRpdGVtLAoJCSkpOwoJfQoKCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCS8qKgoJICogUmV0dXJuIGFsbCBpdGVtcyB3aXRoIHBhcnRpYWwgbWF0Y2hlcwoJICoKCSAqIEBhY2Nlc3MJcHVibGljCgkgKiBAcGFyYW0Jc3RyaW5nCVRoZSBpdGVtIGlkCgkgKiBAcmV0dXJuCXZvaWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGFqYXhfYXV0b19jb21wbGV0ZSgpCgl7CgkJJG5hbWUgPSAkdGhpcy0+aW5wdXQtPmdldCgndGVybScpOwoJCQoJCSRpdGVtcyA9ICR0aGlzLT5kYgoJCQktPnNlbGVjdCgnKiwgbmFtZSBhcyBsYWJlbCcpCgkJCS0+d2hlcmUoJ25hbWUnLCAkbmFtZSkKCQkJLT5vcl9saWtlKCduYW1lJywgJG5hbWUpCgkJCS0+b3JfbGlrZSgnbmFtZScsICRuYW1lLCAnYWZ0ZXInKQoJCQktPmdldCgnaXRlbXMnKQoJCQktPnJlc3VsdCgpOwoJCQoJCWVjaG8ganNvbl9lbmNvZGUoJGl0ZW1zKTsKCX0KfQoKLyogRW5kIG9mIGZpbGU6IGFkbWluLnBocCAqLw=='));
		$this->u->set_file_contents(APPPATH.'modules/items/models/item_m.php', base64_decode('PD9waHAgZGVmaW5lZCgnQkFTRVBBVEgnKSBPUiBleGl0KCdObyBkaXJlY3Qgc2NyaXB0IGFjY2VzcyBhbGxvd2VkJyk7Ci8qKgogKiBQYW5jYWtlCiAqCiAqIEEgc2ltcGxlLCBmYXN0LCBzZWxmLWhvc3RlZCBpbnZvaWNpbmcgYXBwbGljYXRpb24KICoKICogQHBhY2thZ2UJCVBhbmNha2UKICogQGF1dGhvcgkJUGFuY2FrZSBEZXYgVGVhbQogKiBAY29weXJpZ2h0CUNvcHlyaWdodCAoYykgMjAxMCwgUGFuY2FrZSBQYXltZW50cwogKiBAbGljZW5zZQkJaHR0cDovL3BhbmNha2VhcHAuY29tL2xpY2Vuc2UKICogQGxpbmsJCWh0dHA6Ly9wYW5jYWtlYXBwLmNvbQogKiBAc2luY2UJCVZlcnNpb24gMS4wCiAqLwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovKioKICogVGhlIEl0ZW0gTW9kZWwKICoKICogQHN1YnBhY2thZ2UJTW9kZWxzCiAqIEBjYXRlZ29yeQlJdGVtcwogKi8KY2xhc3MgSXRlbV9tIGV4dGVuZHMgUGFuY2FrZV9Nb2RlbAp7Cglwcm90ZWN0ZWQgJHZhbGlkYXRlID0gYXJyYXkoCgkJYXJyYXkoCgkJCSdmaWVsZCcJICA9PiAnbmFtZScsCgkJCSdsYWJlbCcJICA9PiAnbGFuZzpnbG9iYWw6bmFtZScsCgkJCSdydWxlcycJICA9PiAncmVxdWlyZWR8bWF4X2xlbmd0aFsyNTVdJywKCQkpLAoJCWFycmF5KAoJCQknZmllbGQnCSAgPT4gJ2Rlc2NyaXB0aW9uJywKCQkJJ2xhYmVsJwkgID0+ICdsYW5nOmdsb2JhbDpkZXNjcmlwdGlvbicsCgkJCSdydWxlcycJICA9PiAnJywKCQkpLAoJCWFycmF5KAoJCQknZmllbGQnCSAgPT4gJ3F0eScsCgkJCSdsYWJlbCcJICA9PiAnbGFuZzppdGVtczpxdWFudGl0eScsCgkJCSdydWxlcycJICA9PiAncmVxdWlyZWR8bnVtZXJpYycsCgkJKSwKCQlhcnJheSgKCQkJJ2ZpZWxkJwkgID0+ICdyYXRlJywKCQkJJ2xhYmVsJwkgID0+ICdsYW5nOnRhc2tzOnJhdGUnLAoJCQkncnVsZXMnCSAgPT4gJ3JlcXVpcmVkfG51bWVyaWMnLAoJCSksCgkJYXJyYXkoCgkJCSdmaWVsZCcJICA9PiAndGF4X2lkJywKCQkJJ2xhYmVsJwkgID0+ICdsYW5nOml0ZW1zOnRheF9yYXRlJywKCQkJJ3J1bGVzJwkgID0+ICdyZXF1aXJlZHxudW1lcmljJywKCQkpLAoJKTsKfQoKLyogRW5kIG9mIGZpbGU6IGl0ZW1fbS5waHAgKi8='));
		$this->u->set_file_contents(APPPATH.'modules/items/views/are_you_sure.php', base64_decode('PGRpdiBjbGFzcz0ibm9fb2JqZWN0X25vdGlmaWNhdGlvbiBzdXBlci13YXJuaW5nIj4KCjxoND48P3BocCBlY2hvIGxhbmcoJ2l0ZW1zOmRlbGV0ZV90aXRsZScpOyA/PjwvaDQ+Cjw/cGhwIGVjaG8gZm9ybV9vcGVuKCdhZG1pbi9pdGVtcy9kZWxldGUvJy4kaXRlbS0+aWQsICdpZD0iZGVsZXRlLWl0ZW0tZm9ybSInLCBhcnJheSgndW5pcXVlX2lkJyA9PiAkaXRlbS0+aWQsICdhY3Rpb25faGFzaCcgPT4gJGFjdGlvbl9oYXNoKSk7ID8+Cgo8cD48P3BocCBlY2hvIF9fKCdpdGVtczpkZWxldGVfbWVzc2FnZScsIChhcnJheSkgJGl0ZW0tPm5hbWUpPz4gPHNwYW4gY2xhc3M9ImJhZC1uZXdzIj48P3BocCBlY2hvIF9fKCdnbG9iYWw6Y29uZmlybV9lbXBoaXNpc2VkJyk/Pjwvc3Bhbj48L3A+CjxwIGNsYXNzPSJjb25maXJtLWJ0biI+PGEgaHJlZj0iIyIgY2xhc3M9InllbGxvdy1idG4iIG9uY2xpY2s9IiQoJyNkZWxldGUtaXRlbS1mb3JtJykuc3VibWl0KCk7IHJldHVybiBmYWxzZTsiPjxzcGFuPiZuYnNwOyZuYnNwOzw/cGhwIGVjaG8gbGFuZygnZ2xvYmFsOnllc2RlbGV0ZScpID8+Jm5ic3A7Jm5ic3A7PC9zcGFuPjwvYT48L3A+Cjw/cGhwIGVjaG8gZm9ybV9jbG9zZSgpOyA/PgoKPC9kaXY+PCEtLSAvbm9fb2JqZWN0X25vdGlmaWNhdGlvbiBkZWxldGUtd2FybmluZy0tPg=='));
		$this->u->set_file_contents(APPPATH.'modules/items/views/form.php', base64_decode('PGRpdiBjbGFzcz0iaW52b2ljZS1ibG9jayI+Cjx1bCBjbGFzcz0iYnRucy1saXN0Ij4KCTxsaT48L2xpPgo8L3VsPjwhLS0gL2J0bnMtbGlzdCBlbmQgLS0+Cgo8ZGl2IGlkPSJhamF4X2NvbnRhaW5lciI+PC9kaXY+Cgo8ZGl2IGNsYXNzPSJoZWFkLWJveCI+Cgk8aDMgY2xhc3M9InR0bCB0dGwzIj48P3BocCBlY2hvIGxhbmcoJ2l0ZW1zOicuJGFjdGlvbl90eXBlKTsgPz48L2gzPgo8L2Rpdj48IS0tIC9oZWFkLWJveCBlbmQgLS0+CgoKPGRpdiBjbGFzcz0iZm9ybS1ob2xkZXIiPgoJPD9waHAgZWNobyBmb3JtX29wZW4oJ2FkbWluL2l0ZW1zLycuJGFjdGlvbiwgJ2lkPSJpdGVtLW1vZCInKTsgPz4KCTxmaWVsZHNldCBjbGFzcz0iYWRkX2l0ZW0iPgoKCQk8ZGl2IGlkPSJpbnZvaWNlLXR5cGUtYmxvY2siIGNsYXNzPSJyb3ciPgoJCQkKCQk8ZGl2IGNsYXNzPSJyb3ciPgkKCQkJPGxhYmVsIGZvcj0ibmFtZSIgY2xhc3M9InVzZS1sYWJlbCI+PD9waHAgZWNobyBsYW5nKCdpdGVtczpuYW1lJykgPz46PC9sYWJlbD4KCQkJPD9waHAgZWNobyBmb3JtX2lucHV0KCduYW1lJywgc2V0X3ZhbHVlKCduYW1lJyksICdpZD0ibmFtZSIgY2xhc3M9InR4dCInKTsgPz4KCQkJCgkJCTxsYWJlbCBmb3I9InF0eSIgY2xhc3M9InVzZS1sYWJlbCI+PD9waHAgZWNobyBsYW5nKCdpdGVtczpxdHlfaHJzJykgPz48L2xhYmVsPgoJCQk8P3BocCBlY2hvIGZvcm1faW5wdXQoJ3F0eScsIHNldF92YWx1ZSgncXR5JywgMSksICdpZD0icXR5IiBjbGFzcz0idHh0IG51bWVyaWMiJyk7ID8+CgoJCQk8bGFiZWwgZm9yPSJyYXRlIiBjbGFzcz0idXNlLWxhYmVsIj48P3BocCBlY2hvIGxhbmcoJ2l0ZW1zOnJhdGUnKSA/PjwvbGFiZWw+CgkJCTw/cGhwIGVjaG8gZm9ybV9pbnB1dCgncmF0ZScsIHNldF92YWx1ZSgncmF0ZScsICcwLjAwJyksICdpZD0icmF0ZSIgY2xhc3M9InR4dCBudW1lcmljIicpOyA/PgoJCTwvZGl2PgoJCQoJCTxkaXYgY2xhc3M9InJvdyI+CgkJCTxsYWJlbCBmb3I9ImRlc2NyaXB0aW9uIiBjbGFzcz0idXNlLWxhYmVsIj48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDpkZXNjcmlwdGlvbicpID8+OjwvbGFiZWw+CgkJCTw/cGhwIGVjaG8gZm9ybV90ZXh0YXJlYShhcnJheSgKCQkJCSduYW1lJyA9PiAnZGVzY3JpcHRpb24nLAoJCQkJJ2lkJyA9PiAnZGVzY3JpcHRpb24nLAoJCQkJJ3ZhbHVlJyA9PiBzZXRfdmFsdWUoJ2Rlc2NyaXB0aW9uJyksCgkJCQkncm93cycgPT4gMiwKCQkJCSdjb2xzJyA9PiAzMAoJCQkpKTsgPz4KCQk8L2Rpdj4KCQkKCQk8ZGl2IGNsYXNzPSJyb3ciPgoJCQk8bGFiZWwgZm9yPSJ0YXhfaWQiPjw/cGhwIGVjaG8gbGFuZygnaXRlbXM6dGF4X3JhdGUnKSA/Pjo8L2xhYmVsPgoJCQk8ZGl2IGNsYXNzPSJzZWwtaXRlbSI+CgkJCQk8P3BocCBlY2hvIGZvcm1fZHJvcGRvd24oJ3RheF9pZCcsIFNldHRpbmdzOjp0YXhfZHJvcGRvd24oKSwgTlVMTCwgJ2NsYXNzPSJ0YXhfaWQiJyk7ID8+CgkJCTwvZGl2PgoJCTwvZGl2PgoJCgk8cD48YSBocmVmPSIjIiBjbGFzcz0ieWVsbG93LWJ0biIgb25jbGljaz0iJCgnI2l0ZW0tbW9kJykuc3VibWl0KCk7IHJldHVybiBmYWxzZTsiPjxzcGFuPjw/cGhwIGVjaG8gbGFuZygnaXRlbXM6Jy4kYWN0aW9uX3R5cGUpOyA/PiZyYXJyOzwvc3Bhbj48L2E+PC9wPgoJPC9maWVsZHNldD4KICAgIDxpbnB1dCB0eXBlPSJzdWJtaXQiIGNsYXNzPSJoaWRkZW4tc3VibWl0IiAvPgoKPD9waHAgZWNobyBmb3JtX2Nsb3NlKCk7ID8+CjwvZGl2Pgo8L2Rpdj4='));
		$this->u->set_file_contents(APPPATH.'modules/items/views/list.php', base64_decode('PGRpdiBjbGFzcz0iaW52b2ljZS1ibG9jayI+CgkKPD9waHAgaWYgKCRpdGVtcyk6ID8+Cjx1bCBjbGFzcz0iYnRucy1saXN0Ij4KCTxsaT48YSBocmVmPSI8P3BocCBlY2hvIHNpdGVfdXJsKCdhZG1pbi9pdGVtcy9jcmVhdGUnKTsgPz4iIHRpdGxlPSI8P3BocCBlY2hvIGxhbmcoJ2l0ZW1zOmFkZCcpID8+IiBjbGFzcz0ieWVsbG93LWJ0biI+PHNwYW4+PD9waHAgZWNobyBsYW5nKCdpdGVtczphZGQnKSA/Pjwvc3Bhbj48L2E+PC9saT4KPC91bD48IS0tIC9idG5zLWxpc3QgZW5kIC0tPgo8P3BocCBlbmRpZjsgPz4KCjxiciBzdHlsZT0iY2xlYXI6IGJvdGg7IiAvPgo8ZGl2IGlkPSJhamF4X2NvbnRhaW5lciI+PC9kaXY+Cgo8ZGl2IGNsYXNzPSJoZWFkLWJveCI+Cgk8aDMgY2xhc3M9InR0bCB0dGwzIj48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDppdGVtcycpID8+PC9oMz4KPC9kaXY+PCEtLSAvaGVhZC1ib3ggZW5kIC0tPgo8L2Rpdj4KPD9waHAgaWYgKGVtcHR5KCRpdGVtcykpOiA/PgoJCjxkaXYgY2xhc3M9Im5vX29iamVjdF9ub3RpZmljYXRpb24iPgoJPGg0Pjw/cGhwIGVjaG8gbGFuZygnaXRlbXM6bm9pdGVtdGl0bGUnKSA/PjwvaDQ+Cgk8cD48P3BocCBlY2hvIGxhbmcoJ2l0ZW1zOm5vaXRlbWJvZHknKSA/PjwvcD4KCTxwIGNsYXNzPSJjYWxsX3RvX2FjdGlvbiI+PGEgaHJlZj0iPD9waHAgZWNobyBzaXRlX3VybCgnYWRtaW4vaXRlbXMvY3JlYXRlJyk7ID8+IiB0aXRsZT0iPD9waHAgZWNobyBsYW5nKCdpdGVtczphZGQnKSA/PiIgY2xhc3M9InllbGxvdy1idG4iPjxzcGFuPjw/cGhwIGVjaG8gbGFuZygnaXRlbXM6YWRkJykgPz48L3NwYW4+PC9hPjwvcD4KPC9kaXY+PCEtLSAvbm9fb2JqZWN0X25vdGlmaWNhdGlvbiAtLT4KCjw/cGhwIGVsc2U6ID8+Cgo8ZGl2IGlkPSJwcm9qZWN0X2NvbnRhaW5lciI+CgoJPGRpdiBjbGFzcz0idGFibGUtYXJlYSI+CgkJPHRhYmxlIGNsYXNzPSJwYy10YWJsZSIgY2VsbHNwYWNpbmc9IjAiPgoJCQk8dGhlYWQ+CgkJCQk8dHI+CgkJCQkJPHRoPjw/cGhwIGVjaG8gbGFuZygnZ2xvYmFsOm5hbWUnKSA/PjwvdGg+CgkJCQkJPHRoPjw/cGhwIGVjaG8gbGFuZygnZ2xvYmFsOmRlc2NyaXB0aW9uJykgPz48L3RoPgoJCQkJCTx0aD48P3BocCBlY2hvIGxhbmcoJ2l0ZW1zOnF0eV9ocnMnKSA/PjwvdGg+CgkgICAgICAgICAgICAgICAgPHRoPjw/cGhwIGVjaG8gbGFuZygnaXRlbXM6cmF0ZScpID8+PC90aD4KCQkJCQk8dGg+PD9waHAgZWNobyBsYW5nKCdnbG9iYWw6YWN0aW9ucycpID8+PC90aD4KCQkJCTwvdHI+CgkJCTwvdGhlYWQ+CgkJCTx0Ym9keT4KCQkJPD9waHAgZm9yZWFjaCAoJGl0ZW1zIGFzICRpdGVtKTogPz4KCQkJCTx0cj4KCQkJCQk8dGQ+PD9waHAgZWNobyBhbmNob3IoJ2FkbWluL2l0ZW1zL3ZpZXcvJy4kaXRlbS0+aWQsICRpdGVtLT5uYW1lKSA/PjwvdGQ+CgkJCQkJPHRkPjw/cGhwIGVjaG8gd29yZF9saW1pdGVyKCRpdGVtLT5kZXNjcmlwdGlvbiwgMjApOz8+PC90ZD4KCQkJCQk8dGQ+PD9waHAgZWNobyAkaXRlbS0+cXR5OyA/PjwvdGQ+CgkJCQkJPHRkPjw/cGhwIGVjaG8gJGl0ZW0tPnJhdGU7ID8+PC90ZD4KCQkJCQk8dGQgY2xhc3M9ImFjdGlvbnMiPgoJCQkJCTw/cGhwIGVjaG8gYW5jaG9yKCdhZG1pbi9pdGVtcy9lZGl0LycuJGl0ZW0tPmlkLCBfXygnZ2xvYmFsOmVkaXQnKSwgYXJyYXkoJ2NsYXNzJyA9PiAnaWNvbiBlZGl0JywgJ3RpdGxlJyA9PiBfXygnZ2xvYmFsOmVkaXQnKSkpOyA/PiAKCQkJCQk8P3BocCBlY2hvIGFuY2hvcignYWRtaW4vaXRlbXMvZGVsZXRlLycuJGl0ZW0tPmlkLCBsYW5nKCdnbG9iYWw6ZGVsZXRlJyksIGFycmF5KCdjbGFzcycgPT4gJ2ljb24gZGVsZXRlJywgJ3RpdGxlJyA9PiBfXygnZ2xvYmFsOmRlbGV0ZScpKSk7ID8+CgkJCQkJPC90ZD4KCQkJCTwvdHI+CgkJCTw/cGhwIGVuZGZvcmVhY2g7ID8+CgkJCTwvdGJvZHk+CgkJPC90YWJsZT4KCTwvZGl2Pgo8L2Rpdj4KCjxkaXYgY2xhc3M9InBhZ2luYXRpb24iPgoJPD9waHAgZWNobyAkdGhpcy0+cGFnaW5hdGlvbi0+Y3JlYXRlX2xpbmtzKCk7ID8+CjwvZGl2PgoKPD9waHAgZW5kaWY7ID8+Cg=='));
		$this->u->set_file_contents(APPPATH.'modules/items/views/view.php', base64_decode('PGRpdiBjbGFzcz0iaW52b2ljZS1ibG9jayI+CgogICAgPHVsIGNsYXNzPSJidG5zLWxpc3QiPgoJCTxsaT48YSBocmVmPSI8P3BocCBlY2hvIHNpdGVfdXJsKCdhZG1pbi9pbnZvaWNlcy9jcmVhdGUvY2xpZW50LycuJGNsaWVudFsnaWQnXSk7ID8+IiBjbGFzcz0ieWVsbG93LWJ0biI+PHNwYW4+PD9waHAgZWNobyBsYW5nKCdpbnZvaWNlczpjcmVhdGUnKTsgPz48L3NwYW4+PC9hPgoJCTxsaT48YSBocmVmPSI8P3BocCBlY2hvIHNpdGVfdXJsKCdhZG1pbi9jbGllbnRzL2VkaXQvJy4kY2xpZW50WydpZCddKTsgPz4iIGNsYXNzPSJ5ZWxsb3ctYnRuIj48c3Bhbj48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDplZGl0Jyk7ID8+PC9zcGFuPjwvYT4KCQk8bGk+PGEgaHJlZj0iPD9waHAgZWNobyBzaXRlX3VybCgnYWRtaW4vY2xpZW50cy9kZWxldGUvJy4kY2xpZW50WydpZCddKTsgPz4iIGNsYXNzPSJ5ZWxsb3ctYnRuIj48c3Bhbj48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDpkZWxldGUnKTsgPz48L3NwYW4+PC9hPgogICAgPC91bD48IS0tIC9idG5zLWxpc3QgZW5kIC0tPgoKICAgIDxkaXYgaWQ9ImFqYXhfY29udGFpbmVyIj48L2Rpdj4KCgogICAgPGRpdiBjbGFzcz0iaGVhZC1ib3giPgoKCSAgIDw/cGhwIGlmICgkY2xpZW50Wydjb21wYW55J10pOiA/PgoKCQkJPGgzIGNsYXNzPSJ0dGwgdHRsMyI+PD9waHAgZWNobyBsYW5nKCdnbG9iYWw6Y2xpZW50JykgPz46IDw/cGhwIGVjaG8gJGNsaWVudFsnY29tcGFueSddOyA/PjwvaDM+CgoJCTw/cGhwIGVsc2U6ID8+CgoJCQk8aDMgY2xhc3M9InR0bCB0dGwzIj48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDpjbGllbnQnKSA/PjogPD9waHAgZWNobyAkY2xpZW50WydmaXJzdF9uYW1lJ10gLiAnICcgLiAkY2xpZW50WydsYXN0X25hbWUnXTs/PjwvaDM+CgoJCTw/cGhwIGVuZGlmOyA/PgogICAgPC9kaXY+CgoKCjxkaXYgaWQ9ImFkZHJlc3NIb2xkZXIiIHN0eWxlPSJ3aWR0aDoxNTBweDsgZmxvYXQ6bGVmdDsgY2xlYXI6bm9uZTsgbWFyZ2luLWxlZnQ6ODBweCI+Cgk8aDQgY2xhc3M9Im9yYW5nZXJlZCI+PD9waHAgZWNobyBsYW5nKCdnbG9iYWw6YWRkcmVzcycpOyA/PjwvaDQ+Cgk8cD4KCQk8P3BocCBlY2hvICRjbGllbnRbJ2NvbXBhbnknXTs/PjxiciAvPgoJCTw/cGhwIGVjaG8gbmwyYnIoJGNsaWVudFsnYWRkcmVzcyddKTs/PjxiciAvPgoJPC9wPgo8L2Rpdj48IS0tIC9hZGRyZXNzSG9sZGVyIC0tPgoKCjxkaXYgaWQ9ImRldGFpbHNIb2xkZXIiIHN0eWxlPSJ3aWR0aDoyMDBweDsgZmxvYXQ6bGVmdDsgcGFkZGluZzowIDMwcHg7IG1hcmdpbjowIDIwcHg7IGNsZWFyOm5vbmU7IGJvcmRlci1yaWdodDoxcHggc29saWQgI2YyZjJmMjsgYm9yZGVyLWxlZnQ6MXB4IHNvbGlkICNmMmYyZjIiPgoJPGg0IGNsYXNzPSJvcmFuZ2VyZWQiPjw/cGhwIGVjaG8gbGFuZygnZ2xvYmFsOmRldGFpbHMnKSA/PjwvaDQ+Cgk8cD4KCQk8P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDplbWFpbCcpOyA/PjogPD9waHAgZWNobyBtYWlsdG8oJGNsaWVudFsnZW1haWwnXSwgJGNsaWVudFsnZW1haWwnXSk7ID8+PGJyLz4KCQk8P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDpvdmVyZHVlJykgPz46IDxzcGFuIGNsYXNzPSJvdmVyZHVlIj48P3BocCBlY2hvIEN1cnJlbmN5Ojpmb3JtYXQoJHRvdGFsc1snb3ZlcmR1ZSddWyd0b3RhbCddKTsgPz48L3NwYW4+PGJyLz4KCQk8P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDp1bnBhaWQnKSA/PjogPHNwYW4gY2xhc3M9InVucGFpZCI+PD9waHAgZWNobyBDdXJyZW5jeTo6Zm9ybWF0KCR0b3RhbHNbJ3VucGFpZCddWyd0b3RhbCddKTsgPz48L3NwYW4+PGJyLz4KCQk8P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDpwYWlkJykgPz46IDxzcGFuIGNsYXNzPSJwYWlkIj48P3BocCBlY2hvIEN1cnJlbmN5Ojpmb3JtYXQoJHRvdGFsc1sncGFpZCddWyd0b3RhbCddKTs/Pjwvc3Bhbj48YnIvPgoJPC9wPgoKPC9kaXY+PCEtLSAvZGV0YWlsc0hvbGRlciAtLT4KCgo8ZGl2IGlkPSJub3Rlc0hvbGRlciIgc3R5bGU9IndpZHRoOjIwMHB4OyBmbG9hdDpsZWZ0OyBjbGVhcjpub25lOyBoZWlnaHQ6MTAwcHg7Ij4KCTxoNCBjbGFzcz0ib3JhbmdlcmVkIj48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDpub3RlcycpOyA/PjwvaDQ+Cgk8cD48P3BocCBlY2hvIG5sMmJyKCRjbGllbnRbJ3Byb2ZpbGUnXSk7Pz48L3A+Cgo8L2Rpdj48IS0tIC9ub3Rlc0hvbGRlciAtLT4KPC9kaXY+CjxiciBzdHlsZT0iY2xlYXI6IGJvdGgiIC8+Cgo8P3BocCBpZigkdG90YWxzWydjb3VudCddID09IDApOiA/PgoJCgk8ZGl2IGNsYXNzPSJub19vYmplY3Rfbm90aWZpY2F0aW9uIj4KCTxoND48P3BocCBlY2hvIGxhbmcoJ2NsaWVudHM6aGFzbm9pbnZvaWNldGl0bGUnKSA/PjwvaDQ+Cgk8cD48P3BocCBlY2hvIGxhbmcoJ2NsaWVudHM6aGFzbm9pbnZvaWNlYm9keScpID8+PC9wPgoJPHAgY2xhc3M9ImNhbGxfdG9fYWN0aW9uIj48YSBjbGFzcz0ieWVsbG93LWJ0biBmaXJlLWFqYXgiIGlkPSJjcmVhdGVfcHJvamVjdCIgaHJlZj0iPD9waHAgZWNobyBzaXRlX3VybCgnYWRtaW4vcHJvamVjdHMvY3JlYXRlJyk7ID8+Ij48c3Bhbj48P3BocCBlY2hvIGxhbmcoJ3Byb2plY3RzOmFkZCcpOyA/Pjwvc3Bhbj48L2E+PC9wPgoJPC9kaXY+PCEtLSAvbm9fb2JqZWN0X25vdGlmaWNhdGlvbiAtLT4KCQo8P3BocCBlbHNlOiA/PgoKPGRpdiBjbGFzcz0iaW52b2ljZS1ibG9jayI+Cgk8P3BocCBlY2hvIGxhbmcoJ2NsaWVudHM6aGVhbHRoX2NoZWNrJykgPz4gKDw/cGhwIGVjaG8gJGNsaWVudFsnaGVhbHRoJ11bJ292ZXJhbGwnXTs/PiUpOgoJPGRpdiBjbGFzcz0iaGVhbHRoQ2hlY2siPgoJCTxzcGFuIGNsYXNzPSJoZWFsdGhCYXIiPjxzcGFuIGNsYXNzPSJwYWlkIiBzdHlsZT0id2lkdGg6PD9waHAgZWNobyAkY2xpZW50WydoZWFsdGgnXVsnb3ZlcmFsbCddOz8+JSI+PC9zcGFuPjwvc3Bhbj4KCTwvZGl2PjwhLS0gL2hlYWx0aENoZWNrIC0tPgo8L2Rpdj48IS0tIC9pbnZvaWNlLWJsb2NrIC0tPgoKCjxkaXYgY2xhc3M9Imludm9pY2UtYmxvY2siPgo8ZGl2IGNsYXNzPSJoZWFkLWJveCI+Cgk8aDMgY2xhc3M9InR0bCB0dGwyIj48P3BocCBlY2hvIF9fKCdpbnZvaWNlczpvdmVyZHVlJyk7ID8+PC9oMz4KPC9kaXY+PCEtLSAvaGVhZC1ib3ggZW5kIC0tPgo8L2Rpdj4KCgo8ZGl2IGNsYXNzPSJ0YWJsZS1hcmVhIj4KPHRhYmxlIGNsYXNzPSJwYy10YWJsZSI+Cjx0aGVhZD4KCQk8dHI+CgkJICAgIDx0aD48P3BocCBlY2hvIGxhbmcoJ2ludm9pY2VzOm51bWJlcicpID8+PC90aD4KCQkgICAgPHRoPjw/cGhwIGVjaG8gbGFuZygnaW52b2ljZXM6dW5wYWlkX3RvdGFsYW1vdW50JykgPz48L3RoPgoJCQk8dGg+PD9waHAgZWNobyBsYW5nKCdpbnZvaWNlczpkdWUnKSA/PjwvdGg+CgkJCTx0aD48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDphY3Rpb25zJykgPz48L3RoPgoJCTwvdHI+Cgk8L3RoZWFkPgoJPHRib2R5PgoJPD9waHAgZm9yZWFjaCAoJGludm9pY2VzWydvdmVyZHVlJ10gYXMgJGludm9pY2UpOiA/PgoJPHRyPgoJICAgIDx0ZD48P3BocCBlY2hvICRpbnZvaWNlLT5pbnZvaWNlX251bWJlcjsgPz48L3RkPgogICAJPHRkPjw/cGhwIGVjaG8gQ3VycmVuY3k6OmZvcm1hdCgkdGhpcy0+cHBtLT5nZXRJbnZvaWNlVW5wYWlkQW1vdW50KCRpbnZvaWNlLT51bmlxdWVfaWQpLCAkaW52b2ljZS0+Y3VycmVuY3lfY29kZSk7ID8+IC8gPD9waHAgZWNobyBDdXJyZW5jeTo6Zm9ybWF0KCR0aGlzLT5wcG0tPmdldEludm9pY2VUb3RhbEFtb3VudCgkaW52b2ljZS0+dW5pcXVlX2lkKSwgJGludm9pY2UtPmN1cnJlbmN5X2NvZGUpOyA/PjwvdGQ+CgkgICAJPHRkPjw/cGhwIGVjaG8gJGludm9pY2UtPmR1ZV9kYXRlID8gZm9ybWF0X2RhdGUoJGludm9pY2UtPmR1ZV9kYXRlKSA6ICc8ZW0+bi9hPC9lbT4nOyA/PjwvdGQ+CgkJPHRkPjw/cGhwIGVjaG8gYW5jaG9yKCRpbnZvaWNlLT51bmlxdWVfaWQsIF9fKCdnbG9iYWw6dmlldycpKTsgPz4mbmJzcDt8Jm5ic3A7PD9waHAgZWNobyBhbmNob3IoJ2FkbWluL2ludm9pY2VzL2NyZWF0ZWQvJy4kaW52b2ljZS0+dW5pcXVlX2lkLCBfXygnZ2xvYmFsOnJlc2VuZCcpKTsgPz4mbmJzcDt8Jm5ic3A7PD9waHAgZWNobyBhbmNob3IoJ2FkbWluL2ludm9pY2VzL2VkaXQvJy4kaW52b2ljZS0+dW5pcXVlX2lkLCBfXygnZ2xvYmFsOmVkaXQnKSk7ID8+Jm5ic3A7fCZuYnNwOzw/cGhwIGVjaG8gYW5jaG9yKCdhZG1pbi9pbnZvaWNlcy9kZWxldGUvJy4kaW52b2ljZS0+dW5pcXVlX2lkLCBfXygnZ2xvYmFsOmRlbGV0ZScpKTsgPz48L3RkPgoJPC90cj4KCTw/cGhwIGVuZGZvcmVhY2g7ID8+Cgk8L3Rib2R5Pgo8L3RhYmxlPgo8L2Rpdj48IS0tIC90YWJsZS1hcmVhIC0tPgoKCjxiciBzdHlsZT0iY2xlYXI6IGJvdGgiIC8+CjxkaXYgY2xhc3M9Imludm9pY2UtYmxvY2siPgoJPGRpdiBjbGFzcz0iaGVhZC1ib3giPgoJCTxoMyBjbGFzcz0idHRsIHR0bDIiPjw/cGhwIGVjaG8gX18oJ2ludm9pY2VzOnVucGFpZCcpOyA/PjwvaDM+Cgk8L2Rpdj48IS0tIC9oZWFkLWJveCBlbmQgLS0+CjwvZGl2PgoKPGRpdiBjbGFzcz0idGFibGUtYXJlYSI+Cgk8dGFibGUgY2xhc3M9InBjLXRhYmxlIj4KCTx0aGVhZD4KCQk8dHI+CgkJICAgIDx0aD48P3BocCBlY2hvIGxhbmcoJ2ludm9pY2VzOm51bWJlcicpID8+PC90aD4KCQkgICAgPHRoPjw/cGhwIGVjaG8gbGFuZygnaW52b2ljZXM6dW5wYWlkX3RvdGFsYW1vdW50JykgPz48L3RoPgoJCQk8dGg+PD9waHAgZWNobyBsYW5nKCdpbnZvaWNlczpkdWUnKSA/PjwvdGg+CgkJCTx0aD48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDphY3Rpb25zJykgPz48L3RoPgoJCTwvdHI+Cgk8L3RoZWFkPgoJPHRib2R5PgoJPD9waHAgZm9yZWFjaCAoJGludm9pY2VzWyd1bnBhaWQnXSBhcyAkaW52b2ljZSk6ID8+Cgk8dHI+CgkgICAgPHRkPjw/cGhwIGVjaG8gJGludm9pY2UtPmludm9pY2VfbnVtYmVyOyA/PjwvdGQ+CgkgICAJPHRkPjw/cGhwIGVjaG8gQ3VycmVuY3k6OmZvcm1hdCgkdGhpcy0+cHBtLT5nZXRJbnZvaWNlVW5wYWlkQW1vdW50KCRpbnZvaWNlLT51bmlxdWVfaWQpLCAkaW52b2ljZS0+Y3VycmVuY3lfY29kZSk7ID8+IC8gPD9waHAgZWNobyBDdXJyZW5jeTo6Zm9ybWF0KCR0aGlzLT5wcG0tPmdldEludm9pY2VUb3RhbEFtb3VudCgkaW52b2ljZS0+dW5pcXVlX2lkKSwgJGludm9pY2UtPmN1cnJlbmN5X2NvZGUpOyA/PjwvdGQ+CgkgICAJPHRkPjw/cGhwIGVjaG8gJGludm9pY2UtPmR1ZV9kYXRlID8gZm9ybWF0X2RhdGUoJGludm9pY2UtPmR1ZV9kYXRlKSA6ICc8ZW0+bi9hPC9lbT4nOyA/PjwvdGQ+CgkJPHRkPjw/cGhwIGVjaG8gYW5jaG9yKCRpbnZvaWNlLT51bmlxdWVfaWQsIF9fKCdnbG9iYWw6dmlldycpKTsgPz4mbmJzcDt8Jm5ic3A7PD9waHAgZWNobyBhbmNob3IoJ2FkbWluL2ludm9pY2VzL2NyZWF0ZWQvJy4kaW52b2ljZS0+dW5pcXVlX2lkLCBfXygnZ2xvYmFsOnJlc2VuZCcpKTsgPz4mbmJzcDt8Jm5ic3A7PD9waHAgZWNobyBhbmNob3IoJ2FkbWluL2ludm9pY2VzL2VkaXQvJy4kaW52b2ljZS0+dW5pcXVlX2lkLCBfXygnZ2xvYmFsOmVkaXQnKSk7ID8+Jm5ic3A7fCZuYnNwOzw/cGhwIGVjaG8gYW5jaG9yKCdhZG1pbi9pbnZvaWNlcy9kZWxldGUvJy4kaW52b2ljZS0+dW5pcXVlX2lkLCBfXygnZ2xvYmFsOmRlbGV0ZScpKTsgPz48L3RkPgoJPC90cj4KCTw/cGhwIGVuZGZvcmVhY2g7ID8+Cgk8L3Rib2R5Pgo8L3RhYmxlPgo8L2Rpdj48IS0tIC90YWJsZS1hcmVhIC0tPgoKPGJyIHN0eWxlPSJjbGVhcjogYm90aCIgLz4KCjxkaXYgY2xhc3M9Imludm9pY2UtYmxvY2siPgoJPGRpdiBjbGFzcz0iaGVhZC1ib3giPgoJCTxoMyBjbGFzcz0idHRsIHR0bDIiPjw/cGhwIGVjaG8gX18oJ2ludm9pY2VzOnBhaWQnKTsgPz48L2gzPgoJPC9kaXY+PCEtLSAvaGVhZC1ib3ggZW5kIC0tPgo8L2Rpdj4KPGRpdiBjbGFzcz0idGFibGUtYXJlYSI+Cgk8dGFibGUgY2xhc3M9InBjLXRhYmxlIj4KCTx0aGVhZD4KCQk8dHI+CgkJICAgIDx0aD48P3BocCBlY2hvIGxhbmcoJ2ludm9pY2VzOm51bWJlcicpID8+PC90aD4KCQkgICAgPHRoPjw/cGhwIGVjaG8gbGFuZygnaW52b2ljZXM6dW5wYWlkX3RvdGFsYW1vdW50JykgPz48L3RoPgoJCQk8dGg+PD9waHAgZWNobyBsYW5nKCdpbnZvaWNlczpkdWUnKSA/PjwvdGg+CgkJCTx0aD48P3BocCBlY2hvIGxhbmcoJ2dsb2JhbDphY3Rpb25zJykgPz48L3RoPgoJCTwvdHI+Cgk8L3RoZWFkPgoJPHRib2R5PgoJPD9waHAgZm9yZWFjaCAoJGludm9pY2VzWydwYWlkJ10gYXMgJGludm9pY2UpOiA/PgoJPHRyPgoJICAgIDx0ZD48P3BocCBlY2hvICRpbnZvaWNlLT5pbnZvaWNlX251bWJlcjsgPz48L3RkPgogICAJCTx0ZD48P3BocCBlY2hvIEN1cnJlbmN5Ojpmb3JtYXQoJHRoaXMtPnBwbS0+Z2V0SW52b2ljZVVucGFpZEFtb3VudCgkaW52b2ljZS0+dW5pcXVlX2lkKSwgJGludm9pY2UtPmN1cnJlbmN5X2NvZGUpOyA/PiAvIDw/cGhwIGVjaG8gQ3VycmVuY3k6OmZvcm1hdCgkdGhpcy0+cHBtLT5nZXRJbnZvaWNlVG90YWxBbW91bnQoJGludm9pY2UtPnVuaXF1ZV9pZCksICRpbnZvaWNlLT5jdXJyZW5jeV9jb2RlKTsgPz48L3RkPgoJICAgCTx0ZD48P3BocCBlY2hvICRpbnZvaWNlLT5kdWVfZGF0ZSA/IGZvcm1hdF9kYXRlKCRpbnZvaWNlLT5kdWVfZGF0ZSkgOiAnPGVtPm4vYTwvZW0+JzsgPz48L3RkPgoJCTx0ZD48P3BocCBlY2hvIGFuY2hvcigkaW52b2ljZS0+dW5pcXVlX2lkLCBfXygnZ2xvYmFsOnZpZXcnKSk7ID8+Jm5ic3A7fCZuYnNwOzw/cGhwIGVjaG8gYW5jaG9yKCdhZG1pbi9pbnZvaWNlcy9jcmVhdGVkLycuJGludm9pY2UtPnVuaXF1ZV9pZCwgX18oJ2dsb2JhbDpyZXNlbmQnKSk7ID8+Jm5ic3A7fCZuYnNwOzw/cGhwIGVjaG8gYW5jaG9yKCdhZG1pbi9pbnZvaWNlcy9lZGl0LycuJGludm9pY2UtPnVuaXF1ZV9pZCwgX18oJ2dsb2JhbDplZGl0JykpOyA/PiZuYnNwO3wmbmJzcDs8P3BocCBlY2hvIGFuY2hvcignYWRtaW4vaW52b2ljZXMvZGVsZXRlLycuJGludm9pY2UtPnVuaXF1ZV9pZCwgX18oJ2dsb2JhbDpkZWxldGUnKSk7ID8+PC90ZD4KCTwvdHI+Cgk8P3BocCBlbmRmb3JlYWNoOyA/PgoJPC90Ym9keT4KPC90YWJsZT4KCgo8L2Rpdj48IS0tIC90YWJsZS1hcmVhIC0tPgoKPD9waHAgZW5kaWY7ID8+'));
		
	    } else {
		# FTP should have created folders as necessary in 3.1.6, as this bug doesn't affect FTP. Nonetheless, I like safeguards.
		show_error("Pancake's having an issue upgrading. Please contact support@pancakeapp.com as soon as possible. The error code is FII047. Please mention it in the email.");
	    }
	    
	}
    }
    
    function down() {
        
    }
}